# purplestack

![purplestack](assets/images/purplestack.png)

Development stack designed for AI agents to build Nostr-enabled Flutter applications. It includes a complete tech stack based on Riverpod and Purplebase, along with documentation and recipes for common implementation scenarios.

See [CONTEXT](CONTEXT.md) for more.

Originally created to build the new version of [Zapstore](https://zapstore.dev) and to encourage many more freedom oriented tech tools in the store.

## Sample environment setup

For MacOS (may work with Homebrew on Linux) and just for guidance. View the respective projects' documentation for more.

```bash
# Install Android
brew install android-commandlinetools
# add to shell's rc file ANDROID_SDK_ROOT=/opt/homebrew/share/android-commandlinetools

# Install Java
brew install openjdk@17

# Install Dart
brew tap dart-lang/dart
brew install dart
dart --disable-analytics
dart pub global activate fvm

# Install Flutter
fvm releases
fvm install <version>

sdkmanager --install "platforms;android-35"
sdkmanager --install "build-tools;35.0.0"
sdkmanager --install emulator platform-tools tools
sdkmanager --licenses

sdkmanager --install "system-images;android-30;google_apis;arm64-v8a"
avdmanager create avd --name "pixel_8" --package "system-images;android-35;google_apis;arm64-v8a" --abi "arm64-v8a" --device "pixel_8"
```

## License

MIT
<!-- TASKMASTER_EXPORT_START -->
> üéØ **Taskmaster Export** - 2025-09-11 16:22:25 UTC
> üìã Export: with subtasks ‚Ä¢ Status filter: none
> üîó Powered by [Task Master](https://task-master.dev?utm_source=github-readme&utm_medium=readme-export&utm_campaign=auraone&utm_content=task-export-link)

| Project Dashboard |  |
| :-                |:-|
| Task Progress     | ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë 83% |
| Done | 19 |
| In Progress | 0 |
| Pending | 4 |
| Deferred | 0 |
| Cancelled | 0 |
|-|-|
| Subtask Progress | ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 91% |
| Completed | 67 |
| In Progress | 0 |
| Pending | 7 |


| ID | Title | Status | Priority | Dependencies | Complexity |
| :- | :-    | :-     | :-       | :-           | :-         |
| 1 | App Initialization and Configuration | ‚úì&nbsp;done | high | None | ‚óè 3 |
| 1.1 | Execute rename_app script with new identity | ‚úì&nbsp;done | -            | None | N/A |
| 1.2 | Update app icons and splash screen branding | ‚úì&nbsp;done | -            | 1.1 | N/A |
| 1.3 | Configure app metadata and descriptions | ‚úì&nbsp;done | -            | 1.1 | N/A |
| 1.4 | Implement error handling and logging infrastructure | ‚úì&nbsp;done | -            | 1.1 | N/A |
| 2 | Core Database Schema and Models | ‚úì&nbsp;done | high | 1 | ‚óè 7 |
| 2.1 | Design journal-specific database schema | ‚úì&nbsp;done | -            | None | N/A |
| 2.2 | Create JournalEntry model with Drift | ‚úì&nbsp;done | -            | 2.1 | N/A |
| 2.3 | Create MediaItem model with relationships | ‚úì&nbsp;done | -            | 2.1, 2.2 | N/A |
| 2.4 | Create LocationEvent model | ‚úì&nbsp;done | -            | 2.1, 2.2 | N/A |
| 2.5 | Create CalendarEvent and PersonTag models | ‚úì&nbsp;done | -            | 2.1, 2.2 | N/A |
| 2.6 | Implement database indices and migration support | ‚úì&nbsp;done | -            | 2.2, 2.3, 2.4, 2.5 | N/A |
| 3 | Location Services Integration | ‚úì&nbsp;done | high | 2 | ‚óè 8 |
| 3.1 | Add location package and configure permissions | ‚úì&nbsp;done | -            | None | N/A |
| 3.2 | Implement LocationService class with background tracking | ‚úì&nbsp;done | -            | 3.1 | N/A |
| 3.3 | Add geofencing capabilities | ‚úì&nbsp;done | -            | 3.2 | N/A |
| 3.4 | Configure battery-efficient tracking settings | ‚úì&nbsp;done | -            | 3.2 | N/A |
| 3.5 | Handle platform background execution limits | ‚úì&nbsp;done | -            | 3.2 | N/A |
| 3.6 | Implement location data storage | ‚úì&nbsp;done | -            | 3.3 | N/A |
| 3.7 | Add privacy controls and permission flows | ‚úì&nbsp;done | -            | 3.1, 3.6 | N/A |
| 4 | Photo and Media Library Integration | ‚úì&nbsp;done | high | 2 | ‚óè 9 |
| 4.1 | Integrate photo_manager package and setup media library access | ‚úì&nbsp;done | -            | None | N/A |
| 4.2 | Implement PhotoService for automated media scanning | ‚úì&nbsp;done | -            | 4.1 | N/A |
| 4.3 | Add EXIF metadata extraction using exif package | ‚úì&nbsp;done | -            | 4.2 | N/A |
| 4.4 | Integrate google_mlkit_face_detection for on-device face detection | ‚úì&nbsp;done | -            | 4.2 | N/A |
| 4.5 | Implement face clustering algorithms for person identification | ‚úì&nbsp;done | -            | 4.4 | N/A |
| 4.6 | Create media database models and storage schema | ‚úì&nbsp;done | -            | 4.3, 4.5 | N/A |
| 4.7 | Add support for various media formats (JPEG, HEIC, MP4) | ‚úì&nbsp;done | -            | 4.6 | N/A |
| 4.8 | Optimize performance for large media collections | ‚úì&nbsp;done | -            | 4.7 | N/A |
| 5 | Calendar and System Integration | ‚úì&nbsp;done | medium | 2 | ‚óè 8 |
| 5.1 | Implement iOS EventKit integration | ‚úì&nbsp;done | -            | None | N/A |
| 5.2 | Implement Android Calendar Provider integration | ‚úì&nbsp;done | -            | None | N/A |
| 5.3 | Add HealthKit integration (iOS) | ‚úì&nbsp;done | -            | None | N/A |
| 5.4 | Add Google Fit integration (Android) | ‚úì&nbsp;done | -            | None | N/A |
| 5.5 | Implement BLE scanning with flutter_blue_plus | ‚úì&nbsp;done | -            | None | N/A |
| 5.6 | Create CalendarService with privacy controls | ‚úì&nbsp;done | -            | 5.1, 5.2 | N/A |
| 5.7 | Handle data attribution and source tracking | ‚úì&nbsp;done | -            | 5.3, 5.4, 5.5, 5.6 | N/A |
| 6 | On-Device AI Text Generation | ‚úì&nbsp;done | high | 3, 4, 5 | ‚óè 9 |
| 6.1 | Integrate tflite_flutter package | ‚úì&nbsp;done | -            | None | N/A |
| 6.2 | Select and optimize mobile language model | ‚úì&nbsp;done | -            | 6.1 | N/A |
| 6.3 | Implement AIService class architecture | ‚úì&nbsp;done | -            | 6.2 | N/A |
| 6.4 | Create data synthesis pipeline | ‚úì&nbsp;done | -            | None | N/A |
| 6.5 | Develop prompt engineering templates | ‚úì&nbsp;done | -            | 6.4 | N/A |
| 6.6 | Add fallback text generation | ‚úì&nbsp;done | -            | 6.4 | N/A |
| 6.7 | Optimize model performance and memory usage | ‚úì&nbsp;done | -            | 6.3, 6.5 | N/A |
| 6.8 | Handle model loading and inference errors | ‚úì&nbsp;done | -            | 6.3, 6.6 | N/A |
| 7 | Voice-to-Text Editing Interface | ‚úì&nbsp;done | medium | 6 | ‚óè 7 |
| 7.1 | Integrate speech_to_text Package | ‚úì&nbsp;done | -            | None | N/A |
| 7.2 | Implement VoiceEditingService | ‚úì&nbsp;done | -            | 7.1 | N/A |
| 7.3 | Create NLP Command Parsing Logic | ‚úì&nbsp;done | -            | 7.2 | N/A |
| 7.4 | Build Voice Recording UI | ‚úì&nbsp;done | -            | 7.1 | N/A |
| 7.5 | Add Text-to-Speech Feedback | ‚úì&nbsp;done | -            | 7.2 | N/A |
| 7.6 | Handle Microphone Permissions and Audio Quality | ‚úì&nbsp;done | -            | 7.4 | N/A |
| 8 | Home Page with Sub-tabs Interface | ‚úì&nbsp;done | high | 6 | ‚óè 6 |
| 8.1 | Design home page layout with sub-tabs structure | ‚úì&nbsp;done | -            | None | N/A |
| 8.2 | Implement Overview sub-tab with AI summary and stats | ‚úì&nbsp;done | -            | 8.1 | N/A |
| 8.3 | Implement Map sub-tab with daily locations | ‚úì&nbsp;done | -            | 8.1 | N/A |
| 8.4 | Implement Media sub-tab with daily photos | ‚úì&nbsp;done | -            | 8.1 | N/A |
| 8.5 | Implement sub-tab navigation controls | ‚úì&nbsp;done | -            | 8.1 | N/A |
| 8.6 | Add skeleton loading states with skeletonizer | ‚úì&nbsp;done | -            | 8.2, 8.3, 8.4, 8.5 | N/A |
| 8.7 | Ensure responsive design across screen sizes | ‚úì&nbsp;done | -            | 8.2, 8.3, 8.4, 8.5, 8.6 | N/A |
| 9 | Data Export and Backup System | ‚úì&nbsp;done | medium | 8 | ‚óè 8 |
| 9.1 | Design export data format and schema | ‚úì&nbsp;done | -            | None | N/A |
| 9.2 | Implement local file system export | ‚úì&nbsp;done | -            | 9.1 | N/A |
| 9.3 | Add Google Drive integration with googleapis | ‚úì&nbsp;done | -            | 9.2 | N/A |
| 9.4 | Implement Syncthing folder sync | ‚úì&nbsp;done | -            | 9.2 | N/A |
| 9.5 | Add Blossom decentralized storage | ‚úì&nbsp;done | -            | 9.2 | N/A |
| 9.6 | Implement client-side encryption | ‚úì&nbsp;done | -            | 9.1 | N/A |
| 9.7 | Create Nostr integration for selective sharing | ‚úì&nbsp;done | -            | 9.1, 9.6 | N/A |
| 9.8 | Add backup scheduling and monitoring | ‚úì&nbsp;done | -            | 9.3, 9.4, 9.5, 9.6 | N/A |
| 10 | Privacy Controls and Permissions Management | ‚úì&nbsp;done | high | 9 | ‚óè 6 |
| 10.1 | Design granular privacy settings UI | ‚úì&nbsp;done | -            | None | N/A |
| 10.2 | Implement just-in-time permission request flows | ‚úì&nbsp;done | -            | 10.1 | N/A |
| 10.3 | Create privacy dashboard with data visualization | ‚úì&nbsp;done | -            | 10.1 | N/A |
| 10.4 | Add selective data deletion tools | ‚úì&nbsp;done | -            | 10.3 | N/A |
| 10.5 | Implement app lock with biometric authentication | ‚úì&nbsp;done | -            | None | N/A |
| 10.6 | Ensure privacy controls accessibility and documentation | ‚úì&nbsp;done | -            | 10.1, 10.2, 10.3, 10.4, 10.5 | N/A |
| 11 | Animated Bottom Navigation Tab Bar with Smart Titles | ‚úì&nbsp;done | medium | 8 | N/A |
| 12 | Android Microphone Permission Integration | ‚úì&nbsp;done | medium | 7 | N/A |
| 13 | UI Navigation Update: Bottom Navigation Tab Restructuring | ‚úì&nbsp;done | medium | 8, 10 | N/A |
| 14 | Fix Home Screen Banner Scroll Behavior | ‚úì&nbsp;done | medium | 8, 11 | N/A |
| 15 | Implement Sticky Tab Navigation for Home Screen Sub-tabs | ‚úì&nbsp;done | medium | 11, 14 | N/A |
| 16 | Replace Today's Summary placeholder with empty state | ‚úì&nbsp;done | medium | 8 | N/A |
| 17 | Integrate on-device AI for Today's Summary generation | ‚úì&nbsp;done | medium | 6, 16, 3, 5 | N/A |
| 18 | Voice Command Interface for AI Summary Editing | ‚úì&nbsp;done | medium | 7, 17, 8 | N/A |
| 19 | Standardized Bottom Navigation Tab Behavior with Consistent Visual States | ‚úì&nbsp;done | medium | 11, 13 | N/A |
| 20 | Media Linking Feature - Make Home > Media Tab Photos Clickable and Linkable | ‚óã&nbsp;pending | high | 8, 4 | N/A |
| 21 | Local AI Models for Daily Summary Generation (KEY FEATURE) | ‚óã&nbsp;pending | critical | 6, 17, 3, 4, 5 | N/A |
| 21.1 | Project Setup and Core Dependencies | ‚óã&nbsp;pending | -            | None | N/A |
| 21.2 | Spatiotemporal Data Processing - Location Clustering | ‚óã&nbsp;pending | -            | 21.1 | N/A |
| 21.3 | Spatiotemporal Data Processing - Human Activity Recognition | ‚óã&nbsp;pending | -            | 21.1, 21.2 | N/A |
| 21.4 | Visual Context Extraction | ‚óã&nbsp;pending | -            | 21.1 | N/A |
| 21.5 | Multi-modal Fusion and Event Correlation | ‚óã&nbsp;pending | -            | 21.2, 21.3, 21.4 | N/A |
| 21.6 | Narrative Generation | ‚óã&nbsp;pending | -            | 21.5 | N/A |
| 21.7 | Final Optimizations | ‚óã&nbsp;pending | -            | 21.1, 21.2, 21.3, 21.4, 21.5, 21.6 | N/A |
| 22 | UI Fix - Remove Duplicate Sparkle Icons from Today's Summary | ‚óã&nbsp;pending | high | 8, 16, 17 | N/A |
| 23 | Data Persistence - Implement Backup System for App Data Survival | ‚óã&nbsp;pending | high | 9, 2, 3, 4, 5 | N/A |

> üìã **End of Taskmaster Export** - Tasks are synced from your project using the `sync-readme` command.
<!-- TASKMASTER_EXPORT_END -->
